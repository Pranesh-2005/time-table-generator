<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generated Timetable - Amrita</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: "Poppins", sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      display: flex;
      justify-content: center;
      background-color: #f6f4f7;
      padding: 40px;
    }

    .container {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
      width: 95%;
      max-width: 1400px;
      padding: 30px 40px;
    }

    .header {
      text-align: center;
      margin-bottom: 25px;
      border-bottom: 2px solid #e7d5dc;
      padding-bottom: 20px;
    }

    .header .logo {
      display: inline-block;
      background: #8c1c46;
      color: #fff;
      font-size: 22px;
      font-weight: 600;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      line-height: 45px;
      text-align: center;
      margin-right: 10px;
    }

    .header h1 {
      display: inline-block;
      color: #8c1c46;
      vertical-align: middle;
      font-size: 26px;
      margin-bottom: 5px;
    }

    .info-bar {
      background: #fdfbfc;
      border: 1px solid #e7d5dc;
      border-radius: 10px;
      padding: 15px 20px;
      margin-bottom: 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .info-item {
      margin: 5px 15px;
    }

    .info-label {
      font-weight: 600;
      color: #8c1c46;
      display: inline-block;
      min-width: 100px;
    }

    .info-value {
      color: #333;
    }

    .timetable-section {
      margin-bottom: 30px;
    }

    .section-title {
      color: #8c1c46;
      margin-bottom: 15px;
      font-size: 20px;
      border-left: 4px solid #8c1c46;
      padding-left: 10px;
    }

    .timetable-container {
      overflow-x: auto;
      border: 1px solid #e7d5dc;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 800px;
    }

    th {
      background: #8c1c46;
      color: #fff;
      padding: 12px 8px;
      text-align: center;
      font-weight: 600;
      border: 1px solid #a02c56;
    }

    td {
      padding: 10px 8px;
      border: 1px solid #ddd;
      text-align: center;
      vertical-align: top;
      font-size: 12px;
    }

    .break-slot {
      
      color: #272726;
      font-weight: 600;
    }

   .slot-header {
      background: #943054 !important;
      color:white;
      font-size: 10px;
    }
  

    .course-slot {
      background: #edeeed;
      border-left: 3px solid #929893;
    }

    .empty-slot {
      background: #f8f9fa;
      color: #6c757d;
    }

    .course-summary {
      background: #fdfbfc;
      border: 1px solid #e7d5dc;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
    }

    .summary-table {
      width: 100%;
      border-collapse: collapse;
    }

    .summary-table th {
      background: #8c1c46;
      color: white;
      padding: 10px;
      text-align: left;
    }

    .summary-table td {
      padding: 8px 10px;
      border: 1px solid #ddd;
      text-align: left;
      background: white;
    }

    .summary-table tr:nth-child(even) td {
      background: #f9f9f9;
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 180px;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background-color: #8c1c46;
      color: white;
    }

    .btn-primary:hover {
      background-color: #a02c56;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: #28a745;
      color: white;
    }

    .btn-secondary:hover {
      background-color: #218838;
      transform: translateY(-2px);
    }

    .btn-info {
      background-color: #17a2b8;
      color: white;
    }

    .btn-info:hover {
      background-color: #138496;
      transform: translateY(-2px);
    }

    .btn-warning {
      background-color: #f7f7f5;
      border: 1px solid #8c1c46;

      color: #7d0427;
    }

    .btn-warning:hover {
      background-color: #f9f8f4;
      transform: translateY(-2px);
    }

    .btn-light {
      background-color: #6c757d;
      color: white;
    }

    .btn-light:hover {
      background-color: #5a6268;
      transform: translateY(-2px);
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }

    .status-saved {
      background: #d4edda;
      color: #155724;
    }

    .status-new {
      background: #fff3cd;
      color: #856404;
    }

    .success-message {
      background: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
      border: 1px solid #c3e6cb;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .stat-card {
      background: #f8f9fa;
      border: 1px solid #e7d5dc;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }

    .stat-number {
      font-size: 24px;
      font-weight: 600;
      color: #8c1c46;
      display: block;
    }

    .stat-label {
      font-size: 14px;
      color: #6c757d;
    }

    @media (max-width: 768px) {
      body {
        padding: 20px 10px;
      }
      
      .container {
        padding: 20px;
      }
      
      .info-bar {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .action-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }

    .btn-icon {
      margin-right: 8px;
    }

    .timetable-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .quick-action-btn {
      padding: 8px 15px;
      border: 1px solid #8c1c46;
      background: white;
      color: #8c1c46;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .quick-action-btn:hover {
      background: #faf8f8;
      color: rgb(23, 23, 23);
    }

    .time-slot {
      font-size: 9px;
      font-weight: normal;
      display: block;
      margin-top: 2px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <span class="logo">A</span>
      <h1>Amrita Timetable Generator</h1>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-number">{{ total_slots }}</span>
        <span class="stat-label">Total Slots Used</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{{ course_summary|length }}</span>
        <span class="stat-label">Courses</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">5</span>
        <span class="stat-label">Days</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">11</span>
        <span class="stat-label">Time Slots</span>
      </div>
    </div>

    <!-- Information Bar -->
    <div class="info-bar">
      <div class="info-item">
        <span class="info-label">Department:</span>
        <span class="info-value">{{ dept }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Semester:</span>
        <span class="info-value">{{ semester }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Block:</span>
        <span class="info-value">{{ block }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Classroom:</span>
        <span class="info-value">{{ classroom }}</span>
      </div>
      <div class="info-item">
        <span class="info-label">Total Slots:</span>
        <span class="info-value">{{ total_slots }}/50</span>
      </div>
    </div>

    <!-- Quick Actions - Only Download buttons -->
    <div class="timetable-actions">
      <form action="/download_pdf" method="POST">
        <button type="submit" class="quick-action-btn">📄 Download PDF</button>
      </form>
      <form action="/download_csv" method="POST">
        <button type="submit" class="quick-action-btn">📊 Download CSV</button>
      </form>
    </div>

    <!-- Timetable Section -->
    <div class="timetable-section">

      <div class="timetable-container">
        <table>
          <thead>
            <tr>
              <th>Day/Time</th>
              <th class="slot-header">
                Slot 1
                <span class="time-slot">08:00 - 08:50</span>
              </th>
              <th class="slot-header">
                Slot 2
                <span class="time-slot">08:50 - 09:40</span>
              </th>
              <th class="slot-header">
                Slot 3
                <span class="time-slot">09:40 - 10:30</span>
              </th>
              <th class="slot-header break-slot">
                Break
                <span class="time-slot">10:30 - 10:45</span>
              </th>
              <th class="slot-header">
                Slot 4
                <span class="time-slot">10:45 - 11:35</span>
              </th>
              <th class="slot-header">
                Slot 5
                <span class="time-slot">11:35 - 12:25</span>
              </th>
              <th class="slot-header">
                Slot 6
                <span class="time-slot">12:25 - 01:15</span>
              </th>
              <th class="slot-header">
                Slot 7
                <span class="time-slot">01:15 - 02:05</span>
              </th>
              <th class="slot-header">
                Slot 8
                <span class="time-slot">02:05 - 02:55</span>
              </th>
              <th class="slot-header">
                Slot 9
                <span class="time-slot">02:55 - 03:45</span>
              </th>
              <th class="slot-header">
                Slot 10
                <span class="time-slot">03:45 - 04:35</span>
              </th>
            </tr>
          </thead>
          <tbody>
            {% for day, periods in timetable.items() %}
            <tr>
              <td style="font-weight: 600; background: #f8f9fa;">{{ day }}</td>
              {% for period in periods %}
                {% if "Break" in period %}
                  <td class="break-slot">{{ period }}</td>
                {% elif period %}
                  <td class="course-slot">{{ period }}</td>
                {% else %}
                  <td class="empty-slot">-</td>
                {% endif %}
              {% endfor %}
            </tr>
            {% endfor %}
            <!-- Saturday Row -->
            <tr>
              <td style="font-weight: 600; background: #f8f9fa;">Saturday</td>
              {% for i in range(11) %}
                {% if i == 3 %}
                  <td class="break-slot">Break</td>
                {% else %}
                  <td class="empty-slot">-</td>
                {% endif %}
              {% endfor %}
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Course Summary Section -->
    <div class="course-summary">
    
      <table class="summary-table">
        <thead>
          <tr>
            <th>Course Code</th>
            <th>Subject Name</th>
            <th>Faculty Name</th>
            <th>Faculty ID</th>
            <th>Slots/Week</th>
          </tr>
        </thead>
        <tbody>
          {% for course in prev_data.courses %}
          <tr>
            <td>{{ course.course_code }}</td>
            <td>{{ course.subject_name }}</td>
            <td>{{ course.faculty_name }}</td>
            <td>{{ course.faculty_id }}</td>
            <td style="text-align: center;">{{ course.slots_per_week }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Main Action Buttons - Only navigation buttons -->
    <div class="action-buttons">
      <a href="{{ url_for('restore_form_data') }}" class="btn btn-warning">
        <span class="btn-icon">✏️</span>
        Edit This Timetable
      </a>
      
      
      <a href="{{ url_for('admin_dashboard') }}?clear=true" class="quick-action-btn btn " > 
        <span class="btn-icon">🆕</span>
        Create New Timetable
      </a>
    </div>
  </div>

  <script>
    // Add some interactive features
    document.addEventListener('DOMContentLoaded', function() {
      // Add hover effects to course slots
      const courseSlots = document.querySelectorAll('.course-slot');
      courseSlots.forEach(slot => {
        slot.addEventListener('mouseenter', function() {
          this.style.transform = 'scale(1.02)';
          this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
        });
        
        slot.addEventListener('mouseleave', function() {
          this.style.transform = 'scale(1)';
          this.style.boxShadow = 'none';
        });
      });

      // Add click to copy functionality for course codes
      const courseCodes = document.querySelectorAll('.summary-table td:first-child');
      courseCodes.forEach(code => {
        code.style.cursor = 'pointer';
        code.title = 'Click to copy course code';
        
        code.addEventListener('click', function() {
          const textToCopy = this.textContent;
          navigator.clipboard.writeText(textToCopy).then(() => {
            const originalText = this.textContent;
            this.textContent = 'Copied!';
            this.style.background = '#d4edda';
            
            setTimeout(() => {
              this.textContent = originalText;
              this.style.background = '';
            }, 1500);
          });
        });
      });
    });

    // Add print styles
    const style = document.createElement('style');
    style.textContent = `
      @media print {
        body { padding: 0; background: white; }
        .container { box-shadow: none; padding: 10px; }
        .action-buttons, .timetable-actions, .btn { display: none !important; }
        .success-message, .status-badge { display: none !important; }
        .info-bar { border: 2px solid #8c1c46; }
        .stats-grid { display: none; }
        .timetable-container { overflow: visible; }
        table { break-inside: avoid; }
        .time-slot { font-size: 8px !important; }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>